<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MORE ABOUT CARGO AND CREATES.IO, ch 14 - tony</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="一切唯心造">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="../aboutNvim/nvim.html"><strong aria-hidden="true">2.</strong> aboutNvim&Linux</a></li><li class="chapter-item "><a href="../system/index.html"><strong aria-hidden="true">3.</strong> systemProgremming</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../system/lecture1.html"><strong aria-hidden="true">3.1.</strong> lecture1</a></li><li class="chapter-item "><a href="../system/lecture2.html"><strong aria-hidden="true">3.2.</strong> lecture2</a></li></ol></li><li class="chapter-item expanded "><a href="../rust_book/intro.html"><strong aria-hidden="true">4.</strong> The Rust Programming Language</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../rust_book/3_common_programming_concepts.html"><strong aria-hidden="true">4.1.</strong> Common Programming Concepts, Ch3</a></li><li class="chapter-item "><a href="../rust_book/4_understanding_ownership.html"><strong aria-hidden="true">4.2.</strong> UNDERSTANDING OWNERSHIP, Ch4</a></li><li class="chapter-item "><a href="../rust_book/5_using_structs_to_structure_related_data.html"><strong aria-hidden="true">4.3.</strong> USING STRUCTS TO STRUCTURE RELATED DATA, Ch5</a></li><li class="chapter-item "><a href="../rust_book/6_enums_and_pattern_matching.html"><strong aria-hidden="true">4.4.</strong> ENUMS AND PATTERN MATCHING, Ch6</a></li><li class="chapter-item "><a href="../rust_book/7_managing_growing_projects_with_packages_creates_and_modules.html"><strong aria-hidden="true">4.5.</strong> MANAGING GROWING PROJECTS WITH PACKAGES, CREATES, AND MODULES, Ch 7</a></li><li class="chapter-item "><a href="../rust_book/8_common_collections.html"><strong aria-hidden="true">4.6.</strong> COMMON COLLECTIONS, Ch 8</a></li><li class="chapter-item "><a href="../rust_book/9_error_handling.html"><strong aria-hidden="true">4.7.</strong> ERROR HANDLING, Ch 9</a></li><li class="chapter-item "><a href="../rust_book/10_generic_types_traits_and_lifetimes.html"><strong aria-hidden="true">4.8.</strong> GENERIC TYPE, TRAITS, AND LIFETIMES, Ch, 10</a></li><li class="chapter-item "><a href="../rust_book/13_iterators_and_closures.html"><strong aria-hidden="true">4.9.</strong> FUNCTIONAL LANGUAGE FEATRUES : ITERATORS AND CLOSURES, ch 13</a></li><li class="chapter-item expanded "><a href="../rust_book/14_more_about_cargo_and_creates_io.html" class="active"><strong aria-hidden="true">4.10.</strong> MORE ABOUT CARGO AND CREATES.IO, ch 14</a></li><li class="chapter-item "><a href="../rust_book/15_smart_pointers.html"><strong aria-hidden="true">4.11.</strong> SMART POINTERS, ch 15</a></li></ol></li><li class="chapter-item "><a href="../example/example.html"><strong aria-hidden="true">5.</strong> Rust by example(번역)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/hello.html"><strong aria-hidden="true">5.1.</strong> Hello World 출력</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/hello/comment.html"><strong aria-hidden="true">5.1.1.</strong> Comments, 주석</a></li><li class="chapter-item "><a href="../example/hello/print.html"><strong aria-hidden="true">5.1.2.</strong> Formatted print, 출력에 관해</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/hello/debug_display.html"><strong aria-hidden="true">5.1.2.1.</strong> Debug & Display</a></li></ol></li><li class="chapter-item "><a href="../example/hello/testcase.html"><strong aria-hidden="true">5.1.3.</strong> TestCase: List(iter 개념과 Option 개념이 필요함)</a></li></ol></li><li class="chapter-item "><a href="../example/primitives.html"><strong aria-hidden="true">5.2.</strong> Primitives, 원시타입</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/primitives/arrays_and_slices.html"><strong aria-hidden="true">5.2.1.</strong> Arrays and Slices</a></li></ol></li><li class="chapter-item "><a href="../example/customtype.html"><strong aria-hidden="true">5.3.</strong> Custom Types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/customtype/testcase.html"><strong aria-hidden="true">5.3.1.</strong> TestCase: linked-list</a></li><li class="chapter-item "><a href="../example/customtype/constants.html"><strong aria-hidden="true">5.3.2.</strong> constants</a></li></ol></li><li class="chapter-item "><a href="../example/variablebinding.html"><strong aria-hidden="true">5.4.</strong> Variable Bindings,변수 바인딩</a></li><li class="chapter-item "><a href="../example/types.html"><strong aria-hidden="true">5.5.</strong> Types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/types/casting_literals.html"><strong aria-hidden="true">5.5.1.</strong> casting_and_literals</a></li><li class="chapter-item "><a href="../example/types/inference_aliasing.html"><strong aria-hidden="true">5.5.2.</strong> inference_and_aliasing</a></li></ol></li><li class="chapter-item "><a href="../example/conversion/conversion.html"><strong aria-hidden="true">5.6.</strong> Conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/conversion/from_and_into.html"><strong aria-hidden="true">5.6.1.</strong> From and Into, tryFrom and tryInto</a></li><li class="chapter-item "><a href="../example/conversion/to_and_from_strings.html"><strong aria-hidden="true">5.6.2.</strong> To and from Strings</a></li></ol></li><li class="chapter-item "><a href="../example/expressions.html"><strong aria-hidden="true">5.7.</strong> Expressions</a></li><li class="chapter-item "><a href="../example/flowAndControl/flow_and_control.html"><strong aria-hidden="true">5.8.</strong> Flow and Control</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/flowAndControl/for_and_iter.html"><strong aria-hidden="true">5.8.1.</strong> for_and_iter</a></li><li class="chapter-item "><a href="../example/flowAndControl/match.html"><strong aria-hidden="true">5.8.2.</strong> match</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/flowAndControl/pointer_and_ref.html"><strong aria-hidden="true">5.8.2.1.</strong> pointers/ref</a></li><li class="chapter-item "><a href="../example/flowAndControl/guards_and_binding.html"><strong aria-hidden="true">5.8.2.2.</strong> Guards/Binding</a></li></ol></li><li class="chapter-item "><a href="../example/flowAndControl/if_let_and_while_let.html"><strong aria-hidden="true">5.8.3.</strong> if let / while let</a></li></ol></li><li class="chapter-item "><a href="../example/functions/about_funtions.html"><strong aria-hidden="true">5.9.</strong> Functions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/functions/methods.html"><strong aria-hidden="true">5.9.1.</strong> Methods</a></li><li class="chapter-item "><a href="../example/functions/closures/closures.html"><strong aria-hidden="true">5.9.2.</strong> Closures</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/functions/closures/capturing.html"><strong aria-hidden="true">5.9.2.1.</strong> Capturing</a></li><li class="chapter-item "><a href="../example/functions/closures/as_input_parameters.html"><strong aria-hidden="true">5.9.2.2.</strong> As input parameters</a></li><li class="chapter-item "><a href="../example/functions/closures/as_output_parameters.html"><strong aria-hidden="true">5.9.2.3.</strong> As output parameters</a></li><li class="chapter-item "><a href="../example/functions/closures/iterator_searching_thro_iter.html"><strong aria-hidden="true">5.9.2.4.</strong> Examples in std</a></li></ol></li></ol></li><li class="chapter-item "><a href="../example/modules/modules.html"><strong aria-hidden="true">5.10.</strong> Modules</a></li><li class="chapter-item "><a href="../example/crates/crates.html"><strong aria-hidden="true">5.11.</strong> Crates</a></li><li class="chapter-item "><a href="../example/cargo/cargo.html"><strong aria-hidden="true">5.12.</strong> Cargo</a></li><li class="chapter-item "><a href="../example/attributes/attributes.html"><strong aria-hidden="true">5.13.</strong> Attributes, 속성</a></li><li class="chapter-item "><a href="../example/generics/generics.html"><strong aria-hidden="true">5.14.</strong> Generics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/generics/generic_associated_phantom.html"><strong aria-hidden="true">5.14.1.</strong> Associated items & Phantom type parameters</a></li></ol></li><li class="chapter-item "><a href="../example/scoping/scoping.html"><strong aria-hidden="true">5.15.</strong> Scoping rules-오너쉽, 참조, 라이프타임</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../example/scoping/ownership_move_borrowing.html"><strong aria-hidden="true">5.15.1.</strong> Ownership Move Borrowing</a></li><li class="chapter-item "><a href="../example/scoping/lifetimes.html"><strong aria-hidden="true">5.15.2.</strong> Lifetimes</a></li></ol></li><li class="chapter-item "><a href="../example/traits.html"><strong aria-hidden="true">5.16.</strong> Traits</a></li><li class="chapter-item "><a href="../example/macro.html"><strong aria-hidden="true">5.17.</strong> macro</a></li></ol></li><li class="chapter-item "><li class="part-title">Will be Deleted</li><li class="chapter-item affix "><li class="part-title">Datestructre and algorithms</li><li class="chapter-item "><a href="../dataStructureAndAlgorithms/intro.html"><strong aria-hidden="true">6.</strong> 데이터 구조와 알고리즘</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dataStructureAndAlgorithms/section1.html"><strong aria-hidden="true">6.1.</strong> Section 1</a></li></ol></li><li class="chapter-item "><a href="../rustOS/intro.html"><strong aria-hidden="true">7.</strong> writing an OS in Rust</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../rustOS/freestandingRustBinary.html"><strong aria-hidden="true">7.1.</strong> A Freestanding Rust Binary</a></li></ol></li><li class="chapter-item "><li class="part-title">SP Manual</li><li class="chapter-item "><a href="../spmanual/start.html"><strong aria-hidden="true">8.</strong> SP MANUAL</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../spmanual/chapter_1.html"><strong aria-hidden="true">8.1.</strong> ch1</a></li><li class="chapter-item "><a href="../spmanual/chapter_2.html"><strong aria-hidden="true">8.2.</strong> ch2</a></li><li class="chapter-item "><a href="../spmanual/chapter_3.html"><strong aria-hidden="true">8.3.</strong> ch3</a></li><li class="chapter-item "><a href="../spmanual/chapter_4.html"><strong aria-hidden="true">8.4.</strong> ch4</a></li><li class="chapter-item "><a href="../spmanual/chapter_5.html"><strong aria-hidden="true">8.5.</strong> ch5</a></li><li class="chapter-item "><a href="../spmanual/etc.html"><strong aria-hidden="true">8.6.</strong> etc</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">tony</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="more-about-cargo-and-createsio-ch-14"><a class="header" href="#more-about-cargo-and-createsio-ch-14">MORE ABOUT CARGO AND CREATES.IO, ch 14</a></h1>
<p>we will discuss ..</p>
<ul>
<li>
<p>customize your build through release profiles.</p>
</li>
<li>
<p>publish libraries on <a href="https://crates/io/"><em>https://crates.io/</em></a>.</p>
</li>
<li>
<p>Organize large projects with workspaces. </p>
</li>
<li>
<p>Install binaries from <a href="https://crates/io/"><em>https://crates.io/</em></a>.</p>
</li>
<li>
<p>Extend Cargo using custom commands. </p>
</li>
<li>
<p>full explanation of all its features. <a href="https://doc.rust-lang.org/cargo/"><em>https://doc.rust-lang.org/cargo/</em></a>.</p>
</li>
</ul>
<h3 id="customizing-builds-with-release-profiles"><a class="header" href="#customizing-builds-with-release-profiles">Customizing Builds with Release Profiles.</a></h3>
<pre><code class="language-sh">
Cargo.toml

[profile.dev]
opt-level = 0

[profile.release]
opt-level = 3

</code></pre>
<ul>
<li>
<p><strong>cargo build</strong> command is useally for development.</p>
</li>
<li>
<p><strong>cargo build --release</strong> is for the release. </p>
</li>
<li>
<p>we can controll <em>opt-level</em> setting. ( 0 to 3 ).</p>
<ul>
<li>default <em>opt-level is zero</em>, faster compiling than upper number. </li>
</ul>
</li>
</ul>
<h3 id="publishing-a-crate-to-cratesio"><a class="header" href="#publishing-a-crate-to-cratesio">Publishing a Crate to Crates.io</a></h3>
<ol>
<li>
<p>Making Useful Documentation Comments. </p>
<ul>
<li><em>documentaion comment</em> - generate <strong>HTML</strong> documentation. </li>
<li>example of documenting the source code. </li>
<li>documenting use three slashes. </li>
<li>description of what the <strong>add_one</strong> function does. </li>
<li>start a section with the heading <strong>Examples</strong></li>
<li>demonstrates how to use the <strong>add_one</strong> function. </li>
<li>we can generate by running <strong>cargo doc</strong> &gt; <em>target/doc</em> directory</li>
<li>more convenience, running <strong>cargo doc --open</strong> </li>
</ul>
</li>
</ol>
<pre><code class="language-rs">
/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```

pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}

</code></pre>
<img src="./img/13ch_document.png" alt="doc" width="600">
<h3 id="commonly-used-sections"><a class="header" href="#commonly-used-sections">Commonly Used Sections</a></h3>
<p><strong>Panics</strong> , <strong>Errors</strong>, <strong>Safety</strong> </p>
<h3 id="documentation-comments-as-tests"><a class="header" href="#documentation-comments-as-tests">Documentation Comments as Tests</a></h3>
<ul>
<li>adding example code blocks to your documentation comments can help demonstrate how to use your library, and doing so has an additional bonus: running <strong>cargo test</strong> will run the code examples in your documentation as tests. </li>
</ul>
<h3 id="commenting-contained-items"><a class="header" href="#commenting-contained-items">Commenting Contained Items</a></h3>
<ul>
<li>Another style of doc comment, //!, adds documentation to the item that contains the comments rather than adding documentation to the items following the comments. We typically use these doc comments inside the crate root file (src/lib.rs by convention) or inside a module to document the crate or the module as a whole.</li>
</ul>
<pre><code class="language-rs">//! # My Crate
//!
//! `my_crate` is a collection of utilities to make performing certain
//! calculations more convenient.
 /// Adds one to the number given.
// --snip--

</code></pre>
<img src='./img/commenting_doc.png' width='700'>
<h3 id="exporting-a-convenient-public-api-with-pub-use"><a class="header" href="#exporting-a-convenient-public-api-with-pub-use">Exporting a Convenient Public API with pub use</a></h3>
<ul>
<li>
<p>you might want to organize your structs in a hierarchy containing multiple levels. </p>
<ul>
<li>people could have trouble finding out. </li>
</ul>
</li>
<li>
<p>the structure of your public <strong>API</strong> is a major consideration when publishing a crate. </p>
</li>
<li>
<p>structure <em>isn't</em> convenient for others to use from another library, you don't have to rearrange your internal organization: instead, you can re-export items to make a public structure that's different from your private structure by using <strong>pub</strong> use.</p>
</li>
</ul>
<pre><code class="language-rs">
//! # Art
//!
//! A library for modeling artistic concepts.
 pub mod kinds {
    
    /// The primary colors according to the RYB color model.
    pub enum PrimaryColor {
        Red,
        Yellow,
        Blue,
    }

    /// The secondary colors according to the RYB color model.
    pub enum SecondaryColor {
        Orange,
        Green,
        Purple,
    }
}


pub mod utils {
    use crate::kinds::*;
    /// Combines two primary colors in equal amounts to create
    /// a secondary color.
    pub fn mix(c1: PrimaryColor, c2: PrimaryColor) -&gt; SecondaryColor {
        // --snip--
    }
}



</code></pre>
<img src='./img/art_module.png' width='700'>
<ul>
<li>
<p>Note that the <strong>PrimaryColor</strong> and <strong>SecondaryColor</strong> types aren't listed on the front page, nor is the <strong>mix</strong> function. </p>
</li>
<li>
<p>we have to click <em>kinds</em> and <em>utils</em> to see them. </p>
</li>
</ul>
<pre><code class="language-rs">
use art::kinds::PrimaryColor;
use art::utils::mix;
 fn main() {
    let red = PrimaryColor::Red;
    let yellow = PrimaryColor::Yellow;
    mix(red, yellow);
}


</code></pre>
<ul>
<li>
<p>we need to <em>use</em> statements that bring the items from <strong>art</strong> into scope. </p>
</li>
<li>
<p>this structure is more relevant to developers working on the <strong>art</strong> crate than to developers using the <strong>art</strong> crate. </p>
</li>
<li>
<p>developers have to figure out where to look, and the structure is inconvenient because developers must specify the module names in the <strong>use</strong> statements. </p>
</li>
<li>
<p>To remove the internal organization from the public <strong>API</strong>, we can modify the <strong>art</strong> crate code to add <strong>pub use</strong> statements to re-export the items at the top level. </p>
</li>
</ul>
<pre><code class="language-rs">
//! # Art
//!
//! A library for modeling artistic concepts.

pub use self::kinds::PrimaryColor;
pub use self::kinds::SecondaryColor;
pub use self::utils::mix;

pub mod kinds {
    // --snip--
}

pub mod utils {
    // --snip--
}


</code></pre>
<img src='./img/re-exporting.png' width=700>
<ul>
<li>now the <strong>art</strong> crate users can still see and use the internal structrue. </li>
</ul>
<h3 id="setting-up-a-cratesio-account"><a class="header" href="#setting-up-a-cratesio-account">Setting Up a Crates.io Account</a></h3>
<ul>
<li>before you publish any crates, you need to crate an account on <a href="https://crates.io"><em>https://crates.io</em></a> and get an <strong>API</strong> token. </li>
</ul>
<pre><code class="language-sh">
cargo login abcdefgadsf123 // api key from crates.io 

</code></pre>
<ul>
<li>this command will inform Cargo of your API token and stroe it locally in ~/.cargo/credentials. </li>
</ul>
<h3 id="adding-metadata-to-a-new-crate"><a class="header" href="#adding-metadata-to-a-new-crate">Adding Metadata to a New Crate</a></h3>
<ul>
<li>
<p>adding it to the [package] section of the crate's <em>Cargo.toml</em> file. </p>
</li>
<li>
<p>your crate will need a unique name. (you need to search it before publish)</p>
<ul>
<li>once a crate name is taken, no one else can pblish a crate with that name. </li>
</ul>
</li>
<li>
<p>license <a href="http://spdx.org/licenses"><em>http://spdx.org/licenses/</em></a>, you need to check and adding it. </p>
<ul>
<li>also you can adding a license file. </li>
</ul>
</li>
</ul>
<pre><code class="language-sh">
Cargo.toml

[package]

name = &quot;guessing_game&quot;

version = &quot;0.1.0&quot;

authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]

description = &quot;A fun game where you guess what number the computer has
chosen.&quot;

license = &quot;MIT OR Apache-2.0&quot;

edition = &quot;2018&quot;
 
[dependencies]

</code></pre>
<h3 id="publishing-to-cratesio"><a class="header" href="#publishing-to-cratesio">Publishing to Crates.io</a></h3>
<ul>
<li>
<p>publish is permanent. </p>
</li>
<li>
<p>cargo publish command will upload your crates. </p>
</li>
</ul>
<h3 id="publishing-a-new-version-of-an-existing-crate"><a class="header" href="#publishing-a-new-version-of-an-existing-crate">Publishing a New Version of an Existing Crate</a></h3>
<ul>
<li>
<p>when you have been made changes to your crate and are ready to release a new version, you change the <strong>version</strong> value specified in your <em>Cargo.toml</em> file and republish. </p>
</li>
<li>
<p>Use the Semantic Versioning rules at <a href="http://semver.org/"><em>http://semver.org/</em></a>.</p>
</li>
</ul>
<h3 id="removing-versions-from-cratesio-with-cargo-yank"><a class="header" href="#removing-versions-from-cratesio-with-cargo-yank">Removing Versions from Crates.io with cargo yank</a></h3>
<ul>
<li>
<p>you can not remove previous versions of a crate, you can prevent any future projects from adding them s a new dependency. </p>
</li>
<li>
<p>In such situations, Cargo supports <em>yanking</em> a crate version. </p>
</li>
</ul>
<pre><code class="language-sh">
cargo yank --vers 1.0.1 

cargo yank --vers 1.0.1 --undo 

</code></pre>
<h3 id="cargo-workspaces"><a class="header" href="#cargo-workspaces">Cargo Workspaces</a></h3>
<ul>
<li>Cargo offers a feature called <em>workspaces</em> that can help manage multiple related packages that are developed in tandem. </li>
</ul>
<h3 id="creating-a-workspace"><a class="header" href="#creating-a-workspace">Creating a Workspace</a></h3>
<ul>
<li>we will have a workspace containing a binary and two libraries </li>
</ul>
<pre><code class="language-sh">
mkdir add 

cd add

vi Cargo.toml 

//in Cargo.toml

[workspace]

members = [

	&quot;adder&quot;,
]

</code></pre>
<pre><code class="language-sh">
$ cargo new adder

// then cargo build, inside or outside of adder. 

</code></pre>
<img src='./img/cargo_workspace.png' width=700>
<ul>
<li>
<p>the workspace has one <em>target</em> directory at the top level for the compiled artifacts. </p>
</li>
<li>
<p><strong>adder</strong> crate does not have its own <em>target</em> directory, Even if we were to run <strong>cargo build</strong> from insdie the <em>adder</em> directory. it would endup <em>add/target</em>.</p>
<ul>
<li>
<p>the crates in a workspace are meant to depend on each other. </p>
</li>
<li>
<p>if each crate had its own <em>target</em> directory, each crate would have to recompile each of the other crates in the workspace to have the artifacts in its own <em>target</em> directory. </p>
</li>
<li>
<p>by sharing one <em>target</em> directory the crates can avoid unnecessary rebuilding. </p>
</li>
</ul>
</li>
</ul>
<h3 id="creating-the-second-crate-in-the-workspace"><a class="header" href="#creating-the-second-crate-in-the-workspace">Creating the Second Crate in the Workspace</a></h3>
<ul>
<li>add top-level Cargo.toml on the <strong>members</strong> list - &quot;add-one&quot;</li>
</ul>
<pre><code class="language-rs">members = [

	&quot;adder&quot;,
	&quot;add-one&quot;,
]

</code></pre>
<pre><code class="language-sh">
$ cargo new add-one --lib 

</code></pre>
<img src='./img/add-one-lib.png' width=700> 
<ul>
<li>
<p>in the add-one/src/lib.rs </p>
</li>
<li>
<p>add add_one function that gets one parameter then add 1. </p>
</li>
</ul>
<pre><code class="language-sh">
// in the adder/Cargo.toml 

[dependencies]

add-one = { path = &quot;../add-one&quot;}

</code></pre>
<pre><code class="language-rs">
//adder/src/main.rs

use add_one;

fn main() {

	let num = 10;

	println!(&quot;Hello, world! {} plus one is {}!&quot;, num, add_one::add_one(num));

}


</code></pre>
<ul>
<li><strong>cargo build</strong> in the top-level <em>add</em> directory </li>
</ul>
<pre><code class="language-sh">
// -p ( package adder )
$ cargo run -p adder 

</code></pre>
<h3 id="depending-on-an-external-crate-in-a-workspace"><a class="header" href="#depending-on-an-external-crate-in-a-workspace">Depending on an External Crate in a Workspace</a></h3>
<ul>
<li>
<p>Notice that the workspace has only one <em>Cargo.lock</em> file at the top level of the workspace rather than having a <em>Cargo.lock</em> in each crate's directory. </p>
<ul>
<li>this ensures that all crates are using the same version of all dependencies. </li>
</ul>
</li>
<li>
<p>if we add <strong>rand</strong> crate to the <em>adder/Cargo.toml</em> and <em>add-one/Cargo.toml</em> files, Cargo will resolve both of those to one version of <strong>rand</strong> and record that in the one <em>Cargo.lock</em>.</p>
</li>
<li>
<p>we can not use it in other crates in the workspace unless we add <strong>rand</strong> to their <em>Cargo.toml</em> files.</p>
<ul>
<li>we do not need download it again. </li>
</ul>
</li>
</ul>
<h3 id="adding-a-test-to-a-workspace"><a class="header" href="#adding-a-test-to-a-workspace">Adding a Test to a Workspace</a></h3>
<pre><code class="language-rs">
//add-one/src/lib.rs
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}

#[cfg(test)]
mod tests {
    use super::*;
 
 #[test]
    fn it_works() {
        assert_eq!(3, add_one(2));

	}
}

</code></pre>
<ul>
<li>
<p><strong>cargo test</strong> in the top-level <em>add</em> directory.</p>
</li>
<li>
<p>we can test by using the <strong>-p</strong> flag for the crate that we want to test. </p>
</li>
</ul>
<h3 id="publish-tip"><a class="header" href="#publish-tip">publish tip</a></h3>
<ul>
<li>
<p>you can not publish **cargo publish --all.</p>
</li>
<li>
<p>you should publish on each directory of Cargo. </p>
</li>
</ul>
<h3 id="installing-binaries-from-cratesio-with-cargo-install"><a class="header" href="#installing-binaries-from-cratesio-with-cargo-install">Installing Binaries from Crates.io with cargo install</a></h3>
<ul>
<li>
<p>the ** cargo install ** command allows you to install and you binary crates locally. </p>
</li>
<li>
<p>note that you can only install packages that have binary targets. </p>
</li>
<li>
<p>A <em>binary target</em> is the runnable program otherwise library is not. </p>
</li>
<li>
<p><em>README</em> file has infomation about a crate. </p>
</li>
<li>
<p>installed binaries stored in the installation root's <em>bin</em> folder. </p>
</li>
<li>
<p>if you installed Rust using <strong>rustup</strong> and do not have any custom configurations, this directory will be <em>$HOME/.cargo/bin</em>. </p>
<ul>
<li>ensure that directory is in your <strong>$PATH</strong> to be able to run programs you have installed with <strong>cargo install</strong>.</li>
</ul>
</li>
</ul>
<p>example) </p>
<pre><code class="language-sh">
$ cargo install ripgrep 

Updating registry `https://github.com/rust-lang/crates.io-index`
 Downloading ripgrep v0.3.2
 --snip--
   Compiling ripgrep v0.3.2
    Finished release [optimized + debuginfo] target(s) in 97.91 secs
Installing ~/.cargo/bin/rg

</code></pre>
<p>you can use <strong>rg --help</strong></p>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<ul>
<li>
<p>customizing builds with profile. </p>
</li>
<li>
<p>publishing a crate to crates.io. </p>
<ul>
<li>documentation comment - /// </li>
<li>generate by running <strong>cargo doc</strong> </li>
<li>more convenience, running <strong>cargo doc --open</strong> </li>
<li>commenting contained items //! </li>
</ul>
</li>
<li>
<p>exporting a public API with pub use. </p>
</li>
<li>
<p>setting up a crates.io account. </p>
</li>
<li>
<p>adding metadata in cargo.toml. </p>
</li>
<li>
<p>publishing a new version of an existing crate. </p>
</li>
<li>
<p>removing versions from crates.io with cargo yank. </p>
</li>
<li>
<p>creating a workspace. </p>
<ul>
<li>creating the second crate in the workspace. 
<ul>
<li>members = [&quot;a&quot;, &quot;b&quot;, ..] in carglo.toml </li>
</ul>
</li>
</ul>
</li>
<li>
<p>adding a test to a workspace. ex) using -p flag</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../rust_book/13_iterators_and_closures.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../rust_book/15_smart_pointers.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../rust_book/13_iterators_and_closures.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../rust_book/15_smart_pointers.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
